静态服务器页(ISP)页面引擎的实现及其应用实例
======================================
##摘要



##引言

WEB服务器端页面引擎技术(下文也简称"服务器端技术")是指在浏览器/服务器架构上构建网站的通用编程基础技术,现代服务器端技术通常由:编程语言及运行环境,互操作库,WEB服务器扩展和相应的WEB程序设计理念这四个元素中的一些或者全部构成.

WEB服务器端页面引擎技术的在近几年更新换代很快,并且通常服务器端技术都是排他的,所以各技术团队纷纷给自己打上某服务器端技术的标签.[1993年][1],一些WWW开发者共同确定了[RFC3875][2],该文档制定了一个命令行可执行服务器扩展的标准,该标准名称为通用网关接口(CGI),这便是一门很早的通用服务器端技术,该技术旨在使得WEB服务器端程序更好移植,包括在不同操作系统和不同WEB服务器间移植,这项技术一直流行了8年之久,现在我们在身边依然能找到部分地使用该技术的网站.

由于服务器端技术和操作系统与WEB服务器程序联系相当紧密,而后两者是很大的收入来源,于是各大厂商纷纷在服务器端技术上狠下文章.试图在服务器端技术上占有抢先地位.另外由于软件服务化的进程在这几年突飞猛进,社会对于WEB服务器端开发人才的需求也很大,这也促使了服务器端技术种类和数量越来越多.

本文首先从现代服务器页面引擎技术的背景,前端页面渲染技术,和创业团队的开发模式三个方面进行研究并发现现存技术的不足,然后提出了新的页面引擎所应实现的特性,之后记录了在实现这些功能过程中用到的一些方法.

##问题背景

###流行的服务器端页面引擎技术

现在流行的服务器端页面引擎技术多采用脚本语言作为编程环境.随着互联网的扩张,开发人员很快意识到了进行万维网开发需要经常更改页面内容和形式,于是大部分引擎技术采用了使用一门独特的脚本语言来作为编程环境,对于其编程单位的不同,现在流行的服务器端技术可分为脚本引擎,页面引擎和服务引擎三类.

####脚本引擎

脚本引擎指的是以文件为单位存储程序,每个文件中的程序处理来自一个URL的请求的服务器端页面引擎技术.这种服务器端技术的特点是部署,转移方便,其中大部分脚本引擎允许在脚本文件中嵌入HTML代码,这样就方便将静态的HTML文件修改成动态运行的"服务器端页面".该类服务器端技术是本章介绍的三类技术中开始流行最早的一种.并且拥有大量实现.

1. PHP

PHP是"超文本预处理语言"的英文简写简写,它是一个开源的脚本语言实现,它最初在1993年由加拿大程序员RasmusLerdorf开始用C语言开发,当时是一个简单的CGI扩展二进制可执行程序.最初其名字是"Personal Home Page Tools",被作者用于开发维护自己的个人主页,显示自己的简历等一些用途.[3]

* 编程语言

PHP语言的语法十分近似于Perl脚本语言,整个以".php"为扩展名的文件内放置HTML标签,而脚本嵌入在"<?php"和"?>"之间.如

    <html>
     <head>
      <title>PHP Test</title>
     </head>
     <body>
     <?php echo '<p>Hello World</p>'; ?> 
     </body>
    </html>


* 运行环境

PHP的运行环境为一个脚本解释宿主,包含自动垃圾回收机制,采用引用计数方法实现[4],函数和值皆作为变量且为弱类型安全语言[5],PHP的运行时本身没有包括多线程机制,但是简单包装了xNIX/Linux的fork函数[6],在Windows下PHP的子进程映射为系统的线程[7].所以在语言中并没有提供太多的多线程相关API,不能进行现代的高级异步编程.

* 互操作库

由于PHP的设计初衷为服务于网页制作,所以其互操作库满足了大量的网络功能,并且由于其历史悠久,其第三方的扩展也相当完善.

* WEB应用程序设计理念

PHP的设计理念是目前现存的WEB技术中最经典的一种,即客户端内容和服务器端内容相互嵌套,可以理解为字符串拼接.

2. 

####页面引擎
####服务引擎
###前端页面渲染技术
###Web创业团队的开发模式
####出名的Web快速开发竞赛-RailsRumble
####一些Web创业团队的招聘
##设计理念
###渡轮模型
###JSML页面渲染
###动态数据的表示：通配符
###动作处理：对HTTP协议用法的一个提议
##功能实现
###基础运行时和宿主环境
###JavaScript脚本的解释
###JavaScript运行过程中数据的绑定
###控制台
##应用实例
###goclassing.com
###项目网站ispjs.org
##缺陷及其解决方案的提出
###Web服务器不及时清除缓存
###Web服务器对文件读写的冲突
###对CSRF攻击的防范困难
##结论
##参考文献
[1]: http://en.wikipedia.org/wiki/Common_Gateway_Interface (wikipedia-commen gateway interface)
[2]: http://tools.ietf.org/html/rfc3875 (The Common Gateway Interface - CGI Version 1.1)
[3]: http://www.php.net/manual/en/history.php.php (PHP: History of PHP - Manual)
[4]: http://www.php.net/manual/en/features.gc.collecting-cycles.php (PHP: Collecting Cycles - Manual)
[5]: http://www.php.net/manual/en/language.types.type-juggling.php (PHP: Type Juggling - Manual)
[6]: http://php.net/manual/en/function.pcntl-fork.php (PHP: pcntl_fork - Manual)
[7]: http://www.php.net/manual/en/faq.obtaining.php#faq.obtaining.threadsafety (PHP: Obtaining PHP - Manual)